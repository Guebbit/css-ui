@use "sass:color";

$scss-library-prefix: "" !default;
$scss-library-component-name: "solar-system-load" !default;
$scss-library-var-prefix: "" !default;


@function test($color: null, $default: #000){
  @if($color == null){
    @return $default;
  }
  @return $color;
}

// main
$color: null !default;
$color--dark: test($color, #fff) !default;
$color--light: test($color, #000) !default;

// colors
$central-color: $color--light !default;
$satellite-color: color.complement($color--light) !default;

// DARK colors
$central-color--dark: $color--dark !default;
$satellite-color--dark: color.complement($color--dark) !default;

// generic
$size: 24px !default;
$duration: 1s !default;
$multiplier: 1 !default;
$number: 4 !default;

%#{$scss-library-prefix}#{$scss-library-component-name},
.#{$scss-library-prefix}#{$scss-library-component-name} {
  --#{$scss-library-var-prefix}central-color: #{$central-color};
  --#{$scss-library-var-prefix}satellite-color: #{$satellite-color};
  --#{$scss-library-var-prefix}size: #{$size};

  position: relative;
  background-color: var(--#{$scss-library-var-prefix}central-color);
  font-size: var(--#{$scss-library-var-prefix}size);
  width: 1em;
  height: 1em;
  margin: 3em;
  border-radius: 50%;

  & > * {
    position: absolute;
    width: 0.5em;
    height: 0.5em;
    border-radius: 50%;
    background-color: var(--#{$scss-library-var-prefix}satellite-color);
    animation: #{$scss-library-prefix}#{$scss-library-component-name}-animation 1s linear infinite;

    @for $i from 1 through $number {
      &:nth-child(#{$i}) {
        left: -1em * $multiplier * $i;
        top: -0.5em * $multiplier * $i;
        transform-origin: 1.5em * $multiplier * $i 1em * $multiplier * $i;
        animation-duration: $duration * $multiplier * $i;
      }
    }
  }

  @keyframes #{$scss-library-prefix}#{$scss-library-component-name}-animation {
    0% {
      transform: rotateZ(0deg) translate(0,0);
    }

    100% {
      transform: rotateZ(360deg) translate(0,0);
    }
  }
}


@mixin theme-dark-builder(){
  %#{$scss-library-prefix}#{$scss-library-component-name},
  .#{$scss-library-prefix}#{$scss-library-component-name} {
    --#{$scss-library-var-prefix}central-color: #{$central-color--dark};
    --#{$scss-library-var-prefix}satellite-color: #{$satellite-color--dark};
  }
}

.theme--dark{
  @include theme-dark-builder();
}

/**
 * Dark Theme (changes from default variables)
 */
@media (prefers-color-scheme: dark) {
  @include theme-dark-builder();
}
