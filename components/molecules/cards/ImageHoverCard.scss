@use "../../../index" as guebbit;

$scss-library-prefix: "" !default;
$scss-library-component-name: "image-hover-card" !default;
$scss-library-var-prefix: "" !default;

$image-hover-card-threshold: 600px !default;
$image-hover-card-height: 600px !default;
$image-hover-card-height-mobile: $image-hover-card-height !default;
$image-hover-card-duration: 0.5s !default;

@mixin image-hover-card-mobile-mode {
  & > .card-image {
    height: 20%;

    & > img {
      transform: translate(-50%,-50%) scale(1.1);
    }
  }

  & > .card-content {
    opacity: 1;
    height: 60%;
  }
}


%#{$scss-library-prefix}#{$scss-library-component-name},
.#{$scss-library-prefix}#{$scss-library-component-name} {
  --#{$scss-library-var-prefix}height: #{$image-hover-card-height};
  --#{$scss-library-var-prefix}height-mobile: #{$image-hover-card-height-mobile};
  --#{$scss-library-var-prefix}duration: #{$image-hover-card-duration};

  position: relative;
  height: var(--#{$scss-library-var-prefix}height);
  width: 100%;
  transition:
          box-shadow var(--#{$scss-library-var-prefix}duration),
          background-color var(--#{$scss-library-var-prefix}duration);

  & > .card-image {
    position: absolute;
    top: 20%;
    left: 0;
    height: 100%;
    width: 100%;
    transition: height $image-hover-card-duration;

    & > img {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.8);
      transition:
              width var(--#{$scss-library-var-prefix}duration),
              transform var(--#{$scss-library-var-prefix}duration);
      display: block;
      width: 100%;
      object-fit: cover;
    }
  }

  & > .card-content {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 0;
    opacity: 0;
    overflow: hidden;
    transition:
            opacity var(--#{$scss-library-var-prefix}duration),
            height var(--#{$scss-library-var-prefix}duration),
            padding var(--#{$scss-library-var-prefix}duration);
  }

  &.contained {
    & > .card-image {
      overflow: hidden;
    }
  }

  &.animate-active,
  &.animate-on-active.active,
  &.animate-on-hover:hover {
    @include image-hover-card-mobile-mode;
  }

  &.animate-mobile {
    @media (max-width: $image-hover-card-threshold) {
      @include image-hover-card-mobile-mode;
    }
  }

  @media (max-width: $image-hover-card-threshold) {
    height: var(--#{$scss-library-var-prefix}height-mobile);
  }
}