@use "../../../index" as guebbit;

$scss-library-prefix: "" !default;
$scss-library-component-name: "expressive-button" !default;
$scss-library-var-prefix: "" !default;


@forward "../../../components/atoms/buttons/SimpleButton" with (
  $scss-library-prefix: $scss-library-prefix !default,
  $scss-library-var-prefix: $scss-library-var-prefix !default,
  $scss-library-component-name: "simple-button",
);
@use "../../../components/atoms/buttons/SimpleButton" as inherited;
@forward "../../../components/atoms/highlights/HighlightRollup" as rollup-* with (
  $scss-library-prefix: $scss-library-prefix !default,
  $scss-library-var-prefix: $scss-library-var-prefix !default,
  $scss-library-component-name: "highlight-rollup",
);
@forward "../../../components/atoms/highlights/HighlightPopup" as popup-* with (
  $scss-library-prefix: $scss-library-prefix !default,
  $scss-library-var-prefix: $scss-library-var-prefix !default,
  $scss-library-component-name: "highlight-popup",
);


$special-color: #fff !default;
$special-on-color: guebbit.color-contrast($special-color) !default;
$border-width: inherited.$outlined-border-width !default;
$border-color: inherited.$color !default;
$active-color: inherited.$color !default;
$active-on-color: inherited.$on-color !default;
$active-border-color: inherited.$active-color !default;

$elevation-height: 8px !default;

%#{$scss-library-prefix}#{$scss-library-component-name},
.#{$scss-library-prefix}#{$scss-library-component-name} {
  @extend %#{$scss-library-prefix}simple-button;

  --highlight-rollup-color: var(--expressive-button-special-color, #{$special-color});
  --simple-button-color: var(--expressive-button-color, #{inherited.$color});
  --simple-button-on-color: var(--expressive-button-on-color, #{inherited.$on-color});
  --simple-button-outlined-border-color: var(--expressive-button-border-color, #{$border-color});
  --simple-button-active-color: var(--expressive-button-active-color, #{$active-color});
  --simple-button-active-on-color: var(--expressive-button-active-on-color, #{$active-on-color});
  --simple-button-active-outlined-border-color: var(--expressive-button-active-border-color, #{$active-border-color});
  --highlight-rollup-duration: var(--expressive-button-duration, #{inherited.$duration});
  --highlight-popup-duration: var(--expressive-button-duration, #{inherited.$duration});

  &.rollup-button {
    @extend %#{$scss-library-prefix}highlight-rollup;
  }

  &.popup-button {
    @extend %#{$scss-library-prefix}highlight-popup;

    background-color: transparent;

    &::before{
      background-color: var(--#{$scss-library-var-prefix}color);
    }

    &.button-outlined{
      border: none;

      &::after{
        border-width: var(--#{$scss-library-var-prefix}border-width);
        border-style: solid;
        border-color: var(--#{$scss-library-var-prefix}border-color);
      }
    }

    &.button-rounded{
      &::after{
        border-radius: 50%;
      }
    }
  }

  // TODO
  //&.strong-elevation{
  //  box-shadow: 0 var(--#{$scss-library-var-prefix}elevation-height) 0 darken(inherited.$color, 10%), 0 0 3px rgba(#000, 0.2);
  //
  //  &.button-outlined{
  //    border-bottom-color: darken(inherited.$color, 10%);
  //  }
  //
  //  &.animate-active,
  //  &.animate-on-active.active,
  //  &.animate-on-hover:hover {
  //    // shift button downwards by shadow depth amount
  //    box-shadow: 0 0 0 darken(inherited.$active-color, 10%), 0 0 0 rgba(#000, 0.2);
  //    transform: translate3d(0, var(--#{$scss-library-var-prefix}elevation-height), 0);
  //  }
  //}

  &.animate-active,
  &.animate-on-active.active,
  &.animate-on-hover:hover {
    &.popup-button,
    &.rollup-button {
      color: var(--#{$scss-library-var-prefix}special-on-color);
    }
  }
}